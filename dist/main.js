!function(){"use strict";var e=document.querySelector("#popup-profile"),t=document.querySelector("#input-name"),n=document.querySelector("#input-title"),o=document.querySelector("#input-link"),r=document.querySelector("#input-img"),i=document.querySelector("#popup-add"),u=document.querySelector("#popup-img"),l=document.querySelector(".profile__info"),s=document.querySelector(".profile__title");function c(){e.classList.remove("popup__show"),o.value="",r.value="",i.classList.remove("popup__show"),u.classList.remove("popup__show"),document.removeEventListener("keydown",a)}function a(e){"Escape"===e.key&&c()}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,f(o.key),o)}}function f(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var y=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._link=n,this._element=this._getTemplate()},(t=[{key:"_getTemplate",value:function(){return document.querySelector(".template__elements").content.querySelector(".elements__container").cloneNode(!0)}},{key:"_setProperties",value:function(){this._elementImage=this._element.querySelector(".elements__place-image"),this._elementName=this._element.querySelector(".elements__text"),this._likeBtn=this._element.querySelector(".elements__like"),this._dltBtn=this._element.querySelector(".elements__delete"),this._imgBtn=this._element.querySelector(".elements__place-image"),this._fullImg=document.querySelector(".popup__fullImg"),this._footerimg=document.querySelector(".popup__footer"),this._elementImage.src=this._link,this._elementName.textContent=this._name,this._popupImg=document.querySelector("#popup-img")}},{key:"_handleLike",value:function(){this._likeBtn.classList.toggle("elements__like-active")}},{key:"_handleDelete",value:function(){this._element.remove()}},{key:"_setListeners",value:function(){var e=this;this._likeBtn.addEventListener("click",(function(){return e._handleLike()})),this._dltBtn.addEventListener("click",(function(){return e._handleDelete()})),this._imgBtn.addEventListener("click",(function(){return e._setPopUp()}))}},{key:"_setPopUp",value:function(){this._fullImg.src=this._elementImage.src,this._fullImg.alt=this._elementImage.alt,this._footerimg.textContent=this._elementName.textContent,this._popupImg.classList.toggle("popup__show"),this._closeBtn=document.querySelector("#close-img"),this._closeBtn.addEventListener("click",(function(){return c()})),document.addEventListener("keydown",a)}},{key:"generateCard",value:function(){return this._setProperties(),this._setListeners(),this._element}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,d(o.key),o)}}function d(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var h=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formElement=t,this.formSelector=n.formSelector,this.inputSelector=n.inputSelector,this.submitButtonSelector=n.submitButtonSelector,this.inactiveButtonClass=n.inactiveButtonClass,this.inputErrorClass=n.inputErrorClass,this.errorClass=n.errorClass,this.buttonElement=this.formElement.querySelector(n.submitButtonSelector),this.inputList=Array.from(this.formElement.querySelectorAll(this.inputSelector))},(t=[{key:"_showInputError",value:function(e){var t=this.formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this.errorClass)}},{key:"_hideInputError",value:function(e){var t=this.formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this.inputErrorClass),t.classList.remove(this.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this.buttonElement.classList.add(this.inactiveButtonClass),this.buttonElement.disabled=!0):(this.buttonElement.classList.remove(this.inactiveButtonClass),this.buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this.formElement.addEventListener("submit",(function(e){e.preventDefault()})),this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._toggleButtonState(),e._checkInputValidity(t)}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,E(o.key),o)}}function E(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,k(o.key),o)}}function k(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function q(e,t,n,o){var r=C(j(1&o?e.prototype:e),t,n);return 2&o&&"function"==typeof r?function(e){return r.apply(n,e)}:r}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},C.apply(null,arguments)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}var P=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=function(e,t,n){return t=j(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,n||[],j(e).constructor):t.apply(e,n))}(this,t,[e])).handleFormSubmit=n,o.formElement=o.popupElement.querySelector("form"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(t,e),n=t,(o=[{key:"_getInputValues",value:function(){var e={};return this.formElement.querySelectorAll("input").forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;q(t,"setEventListeners",this,3)([]),this.formElement.addEventListener("submit",(function(){e.handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){q(t,"close",this,3)([]),this.formElement.reset}}])&&w(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupElement=document.querySelector(t)},(t=[{key:"open",value:function(){this.popupElement.classList.add("popup__show"),this._handleEscClose()}},{key:"close",value:function(){this.popupElement.classList.remove("popup__show")}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.popupElement.classList.remove("popup__show")}))}},{key:"setEventListeners",value:function(){this.popupElement.querySelector(".popup__close-button").addEventListener("click",this.close)}}])&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()),O=document.querySelector(".profile__edit"),I=document.querySelector("#close-profile"),T=document.querySelector("#profile-form"),x=document.querySelector(".profile__add"),V=document.querySelector("#close-add"),D=document.querySelector(".elements"),z=document.querySelector("#input-img"),R=document.querySelector("#input-link"),W=document.querySelector("#elements-form"),N=document.querySelectorAll(".popup__overlay"),A=new P("#popup-add",(function(e){console.log(e)}));A.setEventListeners();var F=new P("#popup-profile",(function(e){console.log(e)}));F.setEventListeners(),O.addEventListener("click",(function(){F.open()})),I.addEventListener("click",c),T.addEventListener("submit",(function(e){l.textContent=t.value,s.textContent=n.value,e.preventDefault(),c()})),x.addEventListener("click",(function(){A.open()})),V.addEventListener("click",c),[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}].forEach((function(e){var t=new y(e.name,e.link);D.append(t.generateCard())})),W.addEventListener("submit",(function(e){var t=new y(z.value,R.value);e.preventDefault(),D.prepend(t.generateCard()),c()})),N.forEach((function(e){e.addEventListener("click",c),document.removeEventListener("keydown",a)}));var M=new h(W,{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),U=new h(T,{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});M.enableValidation(),U.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEIsSUFBTWdHLEVBQWEsSUFBSTlGLEVBQUtiLEVBQWlCUSxNQUFPVCxFQUFpQlMsT0FDckVHLEVBQUk0RCxpQkFDSjBCLEVBQVlhLFFBQVFILEVBQVdFLGdCQUUvQnhHLEdBQ0YsSUFJQThGLEVBQWMzQixTQUFRLFNBQUN1QyxHQUNyQkEsRUFBUTNFLGlCQUFpQixRQUFTL0IsR0FDbENWLFNBQVNjLG9CQUFvQixVQUFXQyxFQUMxQyxJQUVBLElBQU1zRyxFQUFnQixJQUFJcEUsRUFBY3NELEVBQWMsQ0FDcERuRCxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZDLHFCQUFzQixpQkFDdEJDLG9CQUFxQix5QkFDckJDLGdCQUFpQiwwQkFDakJDLFdBQVkseUJBRVI2RCxFQUFnQixJQUFJckUsRUFBY2tELEVBQWEsQ0FDbkQvQyxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZDLHFCQUFzQixpQkFDdEJDLG9CQUFxQix5QkFDckJDLGdCQUFpQiwwQkFDakJDLFdBQVkseUJBRWQ0RCxFQUFjRSxtQkFDZEQsRUFBY0Msa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvU2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvU2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9TY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL1NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvU2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvU2NyaXB0cy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwb3BVcFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByb2ZpbGVcIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LW5hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVBYm91dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC10aXRsZVwiKTtcclxuY29uc3QgZWxlbWVudExpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtbGlua1wiKTtcclxuY29uc3QgZWxlbWVudE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtaW1nXCIpO1xyXG5jb25zdCBwb3BVcEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtYWRkXCIpO1xyXG5jb25zdCBwb3B1cEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtaW1nXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mb1wiKTtcclxuY29uc3QgcHJvZmlsZUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuXHJcbi8vb3BlbiBjbG9zZSBwcm9maWxlIHByb2ZpbGVcclxuZnVuY3Rpb24gb3BlblByb2ZpbGUoKSB7XHJcbiAgcG9wVXBQcm9maWxlLmNsYXNzTGlzdC50b2dnbGUoXCJwb3B1cF9fc2hvd1wiKTtcclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XHJcbiAgcHJvZmlsZUFib3V0SW5wdXQudmFsdWUgPSBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQ7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjKTtcclxufVxyXG5mdW5jdGlvbiBjbG9zZUFsbCgpIHtcclxuICBwb3BVcFByb2ZpbGUuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19zaG93XCIpO1xyXG4gIGVsZW1lbnRMaW5rSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gIGVsZW1lbnROYW1lSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gIHBvcFVwQWRkLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fc2hvd1wiKTtcclxuICBwb3B1cEltZy5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX3Nob3dcIik7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjKTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVFc2MoZXZ0KSB7XHJcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGNsb3NlQWxsKCk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIHNhdmVDaGFuZ2VzKGV2dCkge1xyXG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZU5hbWVJbnB1dC52YWx1ZTtcclxuICBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSBwcm9maWxlQWJvdXRJbnB1dC52YWx1ZTtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBjbG9zZUFsbCgpO1xyXG59XHJcblxyXG5leHBvcnQgeyBvcGVuUHJvZmlsZSwgY2xvc2VBbGwsIGhhbmRsZUVzYywgc2F2ZUNoYW5nZXMgfTtcclxuIiwiaW1wb3J0IHsgY2xvc2VBbGwsIGhhbmRsZUVzYyB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgfVxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi50ZW1wbGF0ZV9fZWxlbWVudHNcIilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY29udGFpbmVyXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG4gIF9zZXRQcm9wZXJ0aWVzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19wbGFjZS1pbWFnZVwiKTtcclxuICAgIHRoaXMuX2VsZW1lbnROYW1lID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX190ZXh0XCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZVwiKTtcclxuICAgIHRoaXMuX2RsdEJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fZGVsZXRlXCIpO1xyXG4gICAgdGhpcy5faW1nQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19wbGFjZS1pbWFnZVwiKTtcclxuICAgIHRoaXMuX2Z1bGxJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mdWxsSW1nXCIpO1xyXG4gICAgdGhpcy5fZm9vdGVyaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9vdGVyXCIpO1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9lbGVtZW50TmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9wb3B1cEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtaW1nXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19fbGlrZS1hY3RpdmVcIik7XHJcbiAgfVxyXG4gIF9oYW5kbGVEZWxldGUoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuICBfc2V0TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZSgpKTtcclxuICAgIHRoaXMuX2RsdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlKCkpO1xyXG4gICAgdGhpcy5faW1nQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9zZXRQb3BVcCgpKTtcclxuICB9XHJcblxyXG4gIF9zZXRQb3BVcCgpIHtcclxuICAgIHRoaXMuX2Z1bGxJbWcuc3JjID0gdGhpcy5fZWxlbWVudEltYWdlLnNyYztcclxuICAgIHRoaXMuX2Z1bGxJbWcuYWx0ID0gdGhpcy5fZWxlbWVudEltYWdlLmFsdDtcclxuICAgIHRoaXMuX2Zvb3RlcmltZy50ZXh0Q29udGVudCA9IHRoaXMuX2VsZW1lbnROYW1lLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fcG9wdXBJbWcuY2xhc3NMaXN0LnRvZ2dsZShcInBvcHVwX19zaG93XCIpO1xyXG4gICAgdGhpcy5fY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLWltZ1wiKTtcclxuICAgIHRoaXMuX2Nsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZUFsbCgpKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzYyk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9zZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLmZvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuaW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLmVycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5idXR0b25FbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLmlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudCA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgbGV0IHZhbHVlcyA9IHt9O1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIik7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgfVxyXG5cclxuICAvLyBwb2xpbW9yZmlzbW9cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLmZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcblxyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudC5yZXNldDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMucG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX3Nob3dcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX3Nob3dcIik7XHJcbiAgfVxyXG5cclxuICAvLyBtw6l0b2RvIHByaXZhZG8gaW5pY2lhIGVsIG5vbWJyZSBjb24gdW4gZ3Vpw7NuIGFiYWpvIChfKVxyXG4gIF9oYW5kbGVFc2NDbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX3Nob3dcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNsb3NlSWNvbiA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICAgIGNsb3NlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IG9wZW5Qcm9maWxlLCBjbG9zZUFsbCwgc2F2ZUNoYW5nZXMsIGhhbmRsZUVzYyB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuXHJcbmNvbnN0IGJ0bkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRcIik7XHJcbmNvbnN0IGJ0bkNsb3NlUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2UtcHJvZmlsZVwiKTtcclxuY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZm9ybVwiKTtcclxuY29uc3QgYnRuQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGRcIik7XHJcbmNvbnN0IGJ0bkNsb3NlQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZS1hZGRcIik7XHJcbmNvbnN0IGVsZW1lbnRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcclxuY29uc3QgZWxlbWVudE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtaW1nXCIpO1xyXG5jb25zdCBlbGVtZW50TGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC1saW5rXCIpO1xyXG5jb25zdCBmb3JtRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VsZW1lbnRzLWZvcm1cIik7XHJcbmNvbnN0IHBvcHVwT3ZlcmxheXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19vdmVybGF5XCIpO1xyXG5cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IHBvcHVwQ2FyZHMgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1hZGRcIiwgKHZhbHVlcykgPT4ge1xyXG4gIGNvbnNvbGUubG9nKHZhbHVlcyk7XHJcbn0pO1xyXG5wb3B1cENhcmRzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtcHJvZmlsZVwiLCAodmFsdWVzKSA9PiB7XHJcbiAgY29uc29sZS5sb2codmFsdWVzKTtcclxufSk7XHJcbnBvcHVwRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmJ0bkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcclxufSk7XHJcblxyXG5idG5DbG9zZVByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQWxsKTtcclxuZm9ybVByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBzYXZlQ2hhbmdlcyk7XHJcblxyXG5idG5BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cENhcmRzLm9wZW4oKTtcclxufSk7XHJcbmJ0bkNsb3NlQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUFsbCk7XHJcblxyXG4vL0luaWNpYXJcclxuaW5pdGlhbENhcmRzLmZvckVhY2goZnVuY3Rpb24gKGNhcmQpIHtcclxuICBjb25zdCBuZXdFbGVtZW50ID0gbmV3IENhcmQoY2FyZC5uYW1lLCBjYXJkLmxpbmspO1xyXG4gIGVsZW1lbnRBcmVhLmFwcGVuZChuZXdFbGVtZW50LmdlbmVyYXRlQ2FyZCgpKTtcclxufSk7XHJcbmZ1bmN0aW9uIGFkZE5ld0NhcmQoZXZ0KSB7XHJcbiAgY29uc3QgbmV3RWxlbWVudCA9IG5ldyBDYXJkKGVsZW1lbnROYW1lSW5wdXQudmFsdWUsIGVsZW1lbnRMaW5rSW5wdXQudmFsdWUpO1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGVsZW1lbnRBcmVhLnByZXBlbmQobmV3RWxlbWVudC5nZW5lcmF0ZUNhcmQoKSk7XHJcblxyXG4gIGNsb3NlQWxsKCk7XHJcbn1cclxuXHJcbmZvcm1FbGVtZW50cy5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGFkZE5ld0NhcmQpO1xyXG5cclxucG9wdXBPdmVybGF5cy5mb3JFYWNoKChvdmVybGF5KSA9PiB7XHJcbiAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VBbGwpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzYyk7XHJcbn0pO1xyXG5cclxuY29uc3QgdmFsaWRhdGVGb3JtMSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50cywge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufSk7XHJcbmNvbnN0IHZhbGlkYXRlRm9ybTIgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtUHJvZmlsZSwge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufSk7XHJcbnZhbGlkYXRlRm9ybTEuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0ZUZvcm0yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZXhwb3J0IHsgYWRkTmV3Q2FyZCB9O1xyXG4iXSwibmFtZXMiOlsicG9wVXBQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVBYm91dElucHV0IiwiZWxlbWVudExpbmtJbnB1dCIsImVsZW1lbnROYW1lSW5wdXQiLCJwb3BVcEFkZCIsInBvcHVwSW1nIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlQWJvdXQiLCJjbG9zZUFsbCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInZhbHVlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUVzYyIsImV2dCIsImtleSIsIkNhcmQiLCJuYW1lIiwibGluayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnRJbWFnZSIsIl9lbGVtZW50TmFtZSIsIl9saWtlQnRuIiwiX2RsdEJ0biIsIl9pbWdCdG4iLCJfZnVsbEltZyIsIl9mb290ZXJpbWciLCJzcmMiLCJ0ZXh0Q29udGVudCIsIl9wb3B1cEltZyIsInRvZ2dsZSIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZURlbGV0ZSIsIl9zZXRQb3BVcCIsImFsdCIsIl9jbG9zZUJ0biIsIl9zZXRQcm9wZXJ0aWVzIiwiX3NldExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJidXR0b25FbGVtZW50IiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInByZXZlbnREZWZhdWx0IiwiZm9yRWFjaCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwicG9wdXBTZWxlY3RvciIsImhhbmRsZUZvcm1TdWJtaXQiLCJfY2FsbFN1cGVyIiwicG9wdXBFbGVtZW50IiwiX2luaGVyaXRzIiwidmFsdWVzIiwiaW5wdXQiLCJfdGhpczIiLCJfc3VwZXJQcm9wR2V0IiwiX2dldElucHV0VmFsdWVzIiwiY2xvc2UiLCJyZXNldCIsIlBvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYnRuRWRpdCIsImJ0bkNsb3NlUHJvZmlsZSIsImZvcm1Qcm9maWxlIiwiYnRuQWRkIiwiYnRuQ2xvc2VBZGQiLCJlbGVtZW50QXJlYSIsImZvcm1FbGVtZW50cyIsInBvcHVwT3ZlcmxheXMiLCJwb3B1cENhcmRzIiwiY29uc29sZSIsImxvZyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBFZGl0UHJvZmlsZSIsIm9wZW4iLCJjYXJkIiwibmV3RWxlbWVudCIsImFwcGVuZCIsImdlbmVyYXRlQ2FyZCIsInByZXBlbmQiLCJvdmVybGF5IiwidmFsaWRhdGVGb3JtMSIsInZhbGlkYXRlRm9ybTIiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==
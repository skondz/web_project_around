!function(){"use strict";var e=document.querySelector("#popup-profile"),t=document.querySelector("#input-name"),n=document.querySelector("#input-title"),o=document.querySelector("#input-link"),r=document.querySelector("#input-img"),i=document.querySelector("#popup-add"),u=document.querySelector("#popup-img"),l=document.querySelector(".profile__info"),s=document.querySelector(".profile__title");function c(){e.classList.remove("popup__show"),o.value="",r.value="",i.classList.remove("popup__show"),u.classList.remove("popup__show"),document.removeEventListener("keydown",a)}function a(e){"Escape"===e.key&&c()}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,f(o.key),o)}}function f(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=p(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var y=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._link=n,this._element=this._getTemplate()},(t=[{key:"_getTemplate",value:function(){return document.querySelector(".template__elements").content.querySelector(".elements__container").cloneNode(!0)}},{key:"_setProperties",value:function(){this._elementImage=this._element.querySelector(".elements__place-image"),this._elementName=this._element.querySelector(".elements__text"),this._likeBtn=this._element.querySelector(".elements__like"),this._dltBtn=this._element.querySelector(".elements__delete"),this._imgBtn=this._element.querySelector(".elements__place-image"),this._fullImg=document.querySelector(".popup__fullImg"),this._footerimg=document.querySelector(".popup__footer"),this._elementImage.src=this._link,this._elementName.textContent=this._name,this._popupImg=document.querySelector("#popup-img")}},{key:"_handleLike",value:function(){this._likeBtn.classList.toggle("elements__like-active")}},{key:"_handleDelete",value:function(){this._element.remove()}},{key:"_setListeners",value:function(){var e=this;this._likeBtn.addEventListener("click",(function(){return e._handleLike()})),this._dltBtn.addEventListener("click",(function(){return e._handleDelete()})),this._imgBtn.addEventListener("click",(function(){return e._setPopUp()}))}},{key:"_setPopUp",value:function(){this._fullImg.src=this._elementImage.src,this._fullImg.alt=this._elementImage.alt,this._footerimg.textContent=this._elementName.textContent,this._popupImg.classList.toggle("popup__show"),this._closeBtn=document.querySelector("#close-img"),this._closeBtn.addEventListener("click",(function(){return c()})),document.addEventListener("keydown",a)}},{key:"generateCard",value:function(){return this._setProperties(),this._setListeners(),this._element}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,d(o.key),o)}}function d(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=_(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var h=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formElement=t,this.formSelector=n.formSelector,this.inputSelector=n.inputSelector,this.submitButtonSelector=n.submitButtonSelector,this.inactiveButtonClass=n.inactiveButtonClass,this.inputErrorClass=n.inputErrorClass,this.errorClass=n.errorClass,this.buttonElement=this.formElement.querySelector(n.submitButtonSelector),this.inputList=Array.from(this.formElement.querySelectorAll(this.inputSelector))},(t=[{key:"_showInputError",value:function(e){var t=this.formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this.errorClass)}},{key:"_hideInputError",value:function(e){var t=this.formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this.inputErrorClass),t.classList.remove(this.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this.buttonElement.classList.add(this.inactiveButtonClass),this.buttonElement.disabled=!0):(this.buttonElement.classList.remove(this.inactiveButtonClass),this.buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this.formElement.addEventListener("submit",(function(e){e.preventDefault()})),this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._toggleButtonState(),e._checkInputValidity(t)}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,E(o.key),o)}}function E(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=b(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,k(o.key),o)}}function k(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=g(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}function L(e,t,n){return t=j(t),function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,q()?Reflect.construct(t,n||[],j(e).constructor):t.apply(e,n))}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},C.apply(this,arguments)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}var P=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=L(this,t,[e])).handleFormSubmit=n,o.formElement=o.popupElement.querySelector("form"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(t,e),n=t,(o=[{key:"_getInputValues",value:function(){var e={};return this.formElement.querySelectorAll("input").forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;C(j(t.prototype),"setEventListeners",this).call(this),this.formElement.addEventListener("submit",(function(){e.handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){C(j(t.prototype),"close",this).call(this),this.formElement.reset}}])&&w(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupElement=document.querySelector(t)},(t=[{key:"open",value:function(){this.popupElement.classList.add("popup__show"),this._handleEscClose()}},{key:"close",value:function(){this.popupElement.classList.remove("popup__show")}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.popupElement.classList.remove("popup__show")}))}},{key:"setEventListeners",value:function(){this.popupElement.querySelector(".popup__close-button").addEventListener("click",this.close)}}])&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()),O=document.querySelector(".profile__edit"),I=document.querySelector("#close-profile"),T=document.querySelector("#profile-form"),x=document.querySelector(".profile__add"),V=document.querySelector("#close-add"),D=document.querySelector(".elements"),z=document.querySelector("#input-img"),R=document.querySelector("#input-link"),W=document.querySelector("#elements-form"),N=document.querySelectorAll(".popup__overlay"),A=new P("#popup-add",(function(e){console.log(e)}));A.setEventListeners();var F=new P("#popup-profile",(function(e){console.log(e)}));F.setEventListeners(),O.addEventListener("click",(function(){F.open()})),I.addEventListener("click",c),T.addEventListener("submit",(function(e){l.textContent=t.value,s.textContent=n.value,e.preventDefault(),c()})),x.addEventListener("click",(function(){A.open()})),V.addEventListener("click",c),[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}].forEach((function(e){var t=new y(e.name,e.link);D.append(t.generateCard())})),W.addEventListener("submit",(function(e){var t=new y(z.value,R.value);e.preventDefault(),D.prepend(t.generateCard()),c()})),N.forEach((function(e){e.addEventListener("click",c),document.removeEventListener("keydown",a)}));var M=new h(W,{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),U=new h(T,{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});M.enableValidation(),U.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWlCLFVBUjlCLFNBQW9CekIsR0FDbEIsSUFBTW1HLEVBQWEsSUFBSWpHLEVBQUtiLEVBQWlCUSxNQUFPVCxFQUFpQlMsT0FDckVHLEVBQUk0RCxpQkFDSjZCLEVBQVlhLFFBQVFILEVBQVdFLGdCQUUvQjNHLEdBQ0YsSUFJQWlHLEVBQWM5QixTQUFRLFNBQUMwQyxHQUNyQkEsRUFBUTlFLGlCQUFpQixRQUFTL0IsR0FDbENWLFNBQVNjLG9CQUFvQixVQUFXQyxFQUMxQyxJQUVBLElBQU15RyxFQUFnQixJQUFJdkUsRUFBY3lELEVBQWMsQ0FDcER0RCxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZDLHFCQUFzQixpQkFDdEJDLG9CQUFxQix5QkFDckJDLGdCQUFpQiwwQkFDakJDLFdBQVkseUJBRVJnRSxFQUFnQixJQUFJeEUsRUFBY3FELEVBQWEsQ0FDbkRsRCxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZDLHFCQUFzQixpQkFDdEJDLG9CQUFxQix5QkFDckJDLGdCQUFpQiwwQkFDakJDLFdBQVkseUJBRWQrRCxFQUFjRSxtQkFDZEQsRUFBY0Msa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcG9wVXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1wcm9maWxlXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC1uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlQWJvdXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQtdGl0bGVcIik7XHJcbmNvbnN0IGVsZW1lbnRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWxpbmtcIik7XHJcbmNvbnN0IGVsZW1lbnROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWltZ1wiKTtcclxuY29uc3QgcG9wVXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWFkZFwiKTtcclxuY29uc3QgcG9wdXBJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWltZ1wiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm9cIik7XHJcbmNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcblxyXG4vL29wZW4gY2xvc2UgcHJvZmlsZSBwcm9maWxlXHJcbmZ1bmN0aW9uIG9wZW5Qcm9maWxlKCkge1xyXG4gIHBvcFVwUHJvZmlsZS5jbGFzc0xpc3QudG9nZ2xlKFwicG9wdXBfX3Nob3dcIik7XHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIHByb2ZpbGVBYm91dElucHV0LnZhbHVlID0gcHJvZmlsZUFib3V0LnRleHRDb250ZW50O1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzYyk7XHJcbn1cclxuZnVuY3Rpb24gY2xvc2VBbGwoKSB7XHJcbiAgcG9wVXBQcm9maWxlLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fc2hvd1wiKTtcclxuICBlbGVtZW50TGlua0lucHV0LnZhbHVlID0gXCJcIjtcclxuICBlbGVtZW50TmFtZUlucHV0LnZhbHVlID0gXCJcIjtcclxuICBwb3BVcEFkZC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX3Nob3dcIik7XHJcbiAgcG9wdXBJbWcuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19zaG93XCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzYyk7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlRXNjKGV2dCkge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjbG9zZUFsbCgpO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBzYXZlQ2hhbmdlcyhldnQpIHtcclxuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lSW5wdXQudmFsdWU7XHJcbiAgcHJvZmlsZUFib3V0LnRleHRDb250ZW50ID0gcHJvZmlsZUFib3V0SW5wdXQudmFsdWU7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY2xvc2VBbGwoKTtcclxufVxyXG5cclxuZXhwb3J0IHsgb3BlblByb2ZpbGUsIGNsb3NlQWxsLCBoYW5kbGVFc2MsIHNhdmVDaGFuZ2VzIH07XHJcbiIsImltcG9ydCB7IGNsb3NlQWxsLCBoYW5kbGVFc2MgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IobmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gIH1cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIudGVtcGxhdGVfX2VsZW1lbnRzXCIpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NvbnRhaW5lclwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuICBfc2V0UHJvcGVydGllcygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGxhY2UtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9lbGVtZW50TmFtZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGV4dFwiKTtcclxuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2VcIik7XHJcbiAgICB0aGlzLl9kbHRCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2RlbGV0ZVwiKTtcclxuICAgIHRoaXMuX2ltZ0J0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fcGxhY2UtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9mdWxsSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZnVsbEltZ1wiKTtcclxuICAgIHRoaXMuX2Zvb3RlcmltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvb3RlclwiKTtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWltZ1wiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2xpa2UtYWN0aXZlXCIpO1xyXG4gIH1cclxuICBfaGFuZGxlRGVsZXRlKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcbiAgX3NldExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2UoKSk7XHJcbiAgICB0aGlzLl9kbHRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZSgpKTtcclxuICAgIHRoaXMuX2ltZ0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fc2V0UG9wVXAoKSk7XHJcbiAgfVxyXG5cclxuICBfc2V0UG9wVXAoKSB7XHJcbiAgICB0aGlzLl9mdWxsSW1nLnNyYyA9IHRoaXMuX2VsZW1lbnRJbWFnZS5zcmM7XHJcbiAgICB0aGlzLl9mdWxsSW1nLmFsdCA9IHRoaXMuX2VsZW1lbnRJbWFnZS5hbHQ7XHJcbiAgICB0aGlzLl9mb290ZXJpbWcudGV4dENvbnRlbnQgPSB0aGlzLl9lbGVtZW50TmFtZS50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX3BvcHVwSW1nLmNsYXNzTGlzdC50b2dnbGUoXCJwb3B1cF9fc2hvd1wiKTtcclxuICAgIHRoaXMuX2Nsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZS1pbWdcIik7XHJcbiAgICB0aGlzLl9jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VBbGwoKSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2MpO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fc2V0UHJvcGVydGllcygpO1xyXG4gICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncykge1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLmlucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuaW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuYnV0dG9uRWxlbWVudCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLmlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuZm9ybUVsZW1lbnQgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGxldCB2YWx1ZXMgPSB7fTtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgLy8gcG9saW1vcmZpc21vXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG5cclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuZm9ybUVsZW1lbnQucmVzZXQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLnBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19zaG93XCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19zaG93XCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gbcOpdG9kbyBwcml2YWRvIGluaWNpYSBlbCBub21icmUgY29uIHVuIGd1acOzbiBhYmFqbyAoXylcclxuICBfaGFuZGxlRXNjQ2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19zaG93XCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUljb24gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIik7XHJcbiAgICBjbG9zZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9zY3JpcHRzL0NhcmQuanNcIjtcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7XG4gIG9wZW5Qcm9maWxlLFxuICBjbG9zZUFsbCxcbiAgc2F2ZUNoYW5nZXMsXG4gIGhhbmRsZUVzYyxcbn0gZnJvbSBcIi4vc2NyaXB0cy8vdXRpbHMuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuXG5jb25zdCBidG5FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0XCIpO1xuY29uc3QgYnRuQ2xvc2VQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZS1wcm9maWxlXCIpO1xuY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZm9ybVwiKTtcbmNvbnN0IGJ0bkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkXCIpO1xuY29uc3QgYnRuQ2xvc2VBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLWFkZFwiKTtcbmNvbnN0IGVsZW1lbnRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcbmNvbnN0IGVsZW1lbnROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWltZ1wiKTtcbmNvbnN0IGVsZW1lbnRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWxpbmtcIik7XG5jb25zdCBmb3JtRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VsZW1lbnRzLWZvcm1cIik7XG5jb25zdCBwb3B1cE92ZXJsYXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fb3ZlcmxheVwiKTtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IHBvcHVwQ2FyZHMgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1hZGRcIiwgKHZhbHVlcykgPT4ge1xuICBjb25zb2xlLmxvZyh2YWx1ZXMpO1xufSk7XG5wb3B1cENhcmRzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1wcm9maWxlXCIsICh2YWx1ZXMpID0+IHtcbiAgY29uc29sZS5sb2codmFsdWVzKTtcbn0pO1xucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idG5FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xufSk7XG5cbmJ0bkNsb3NlUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VBbGwpO1xuZm9ybVByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBzYXZlQ2hhbmdlcyk7XG5cbmJ0bkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cENhcmRzLm9wZW4oKTtcbn0pO1xuYnRuQ2xvc2VBZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQWxsKTtcblxuLy9JbmljaWFyXG5pbml0aWFsQ2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoY2FyZCkge1xuICBjb25zdCBuZXdFbGVtZW50ID0gbmV3IENhcmQoY2FyZC5uYW1lLCBjYXJkLmxpbmspO1xuICBlbGVtZW50QXJlYS5hcHBlbmQobmV3RWxlbWVudC5nZW5lcmF0ZUNhcmQoKSk7XG59KTtcbmZ1bmN0aW9uIGFkZE5ld0NhcmQoZXZ0KSB7XG4gIGNvbnN0IG5ld0VsZW1lbnQgPSBuZXcgQ2FyZChlbGVtZW50TmFtZUlucHV0LnZhbHVlLCBlbGVtZW50TGlua0lucHV0LnZhbHVlKTtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGVsZW1lbnRBcmVhLnByZXBlbmQobmV3RWxlbWVudC5nZW5lcmF0ZUNhcmQoKSk7XG5cbiAgY2xvc2VBbGwoKTtcbn1cblxuZm9ybUVsZW1lbnRzLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYWRkTmV3Q2FyZCk7XG5cbnBvcHVwT3ZlcmxheXMuZm9yRWFjaCgob3ZlcmxheSkgPT4ge1xuICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUFsbCk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzYyk7XG59KTtcblxuY29uc3QgdmFsaWRhdGVGb3JtMSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50cywge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn0pO1xuY29uc3QgdmFsaWRhdGVGb3JtMiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Qcm9maWxlLCB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxufSk7XG52YWxpZGF0ZUZvcm0xLmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRlRm9ybTIuZW5hYmxlVmFsaWRhdGlvbigpO1xuZXhwb3J0IHsgYWRkTmV3Q2FyZCB9O1xuIl0sIm5hbWVzIjpbInBvcFVwUHJvZmlsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlQWJvdXRJbnB1dCIsImVsZW1lbnRMaW5rSW5wdXQiLCJlbGVtZW50TmFtZUlucHV0IiwicG9wVXBBZGQiLCJwb3B1cEltZyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwiY2xvc2VBbGwiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ2YWx1ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVFc2MiLCJldnQiLCJrZXkiLCJDYXJkIiwibmFtZSIsImxpbmsiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50SW1hZ2UiLCJfZWxlbWVudE5hbWUiLCJfbGlrZUJ0biIsIl9kbHRCdG4iLCJfaW1nQnRuIiwiX2Z1bGxJbWciLCJfZm9vdGVyaW1nIiwic3JjIiwidGV4dENvbnRlbnQiLCJfcG9wdXBJbWciLCJ0b2dnbGUiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZSIsIl9oYW5kbGVEZWxldGUiLCJfc2V0UG9wVXAiLCJhbHQiLCJfY2xvc2VCdG4iLCJfc2V0UHJvcGVydGllcyIsIl9zZXRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiYnV0dG9uRWxlbWVudCIsImlucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJwcmV2ZW50RGVmYXVsdCIsImZvckVhY2giLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2NhbGxTdXBlciIsInBvcHVwRWxlbWVudCIsIl9pbmhlcml0cyIsInZhbHVlcyIsImlucHV0IiwiX3RoaXMyIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhbGwiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJjbG9zZSIsInJlc2V0IiwiUG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJidG5FZGl0IiwiYnRuQ2xvc2VQcm9maWxlIiwiZm9ybVByb2ZpbGUiLCJidG5BZGQiLCJidG5DbG9zZUFkZCIsImVsZW1lbnRBcmVhIiwiZm9ybUVsZW1lbnRzIiwicG9wdXBPdmVybGF5cyIsInBvcHVwQ2FyZHMiLCJjb25zb2xlIiwibG9nIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRQcm9maWxlIiwib3BlbiIsImNhcmQiLCJuZXdFbGVtZW50IiwiYXBwZW5kIiwiZ2VuZXJhdGVDYXJkIiwicHJlcGVuZCIsIm92ZXJsYXkiLCJ2YWxpZGF0ZUZvcm0xIiwidmFsaWRhdGVGb3JtMiIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9
!function(){"use strict";var t={d:function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};t.d({},{XV:function(){return jt},QH:function(){return Ot},gR:function(){return Et}});var e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=u(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}var c=new(function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=e,this.headers=r}var e,r;return e=t,(r=[{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){if(!t.ok)throw new Error("Server error: ".concat(t.status));return t.json()})).catch((function(t){return console.error("Error:",t)}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){if(!t.ok)throw new Error("Server error: ".concat(t.status));return t.json()})).catch((function(t){return console.error("Error:",t)}))}},{key:"updateUserInfo",value:function(t,e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:o(o({},this.headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({name:t,about:e})}).then((function(t){if(!t.ok)throw new Error("Server error: ".concat(t.status));return t.json()})).catch((function(t){return console.error("Error:",t)}))}},{key:"getNewCards",value:function(t,e){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:o(o({},this.headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({name:t,link:e})}).then((function(t){if(!t.ok)throw new Error("Server error: ".concat(t.status));return t.json()})).catch((function(t){return console.error("Error:",t)}))}},{key:"deleteCard",value:function(t){return fetch("".concat(this.baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this.headers}).then((function(t){if(!t.ok)throw new Error("Server error: ".concat(t.status));return t.json()})).catch((function(t){return console.error("Error:",t)}))}},{key:"likeCard",value:function(t,e){var r=e?"DELETE":"PUT";return fetch("".concat(this.baseUrl,"/cards/").concat(t,"/likes"),{method:r,headers:this.headers}).then((function(t){if(!t.ok)throw new Error("Server error: ".concat(t.status));return t.json()})).catch((function(t){return console.error("Error:",t)}))}},{key:"updateAvatar",value:function(t){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:o(o({},this.headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({avatar:t})}).then((function(t){if(!t.ok)throw new Error("Server error: ".concat(t.status));return t.json()})).catch((function(t){return console.error("Error:",t)}))}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}())("https://around-api.es.tripleten-services.com/v1/",{authorization:"5cb824c7-18ee-4a7f-a0d4-afa785bcbcee"});function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:String(e)}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this.fixed=document.querySelector(".body"),this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popup.classList.add("popup_open"),document.addEventListener("keyup",this._handleEscClose),this.fixed.classList.add("fix"),this.setEventListeners()}},{key:"close",value:function(){this._popup.classList.remove("popup_open"),document.removeEventListener("keyup",this._handleEscClose),this.fixed.classList.remove("fix")}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){(e.target.classList.contains("popup_open")||e.target.classList.contains("popup__button-typeclose"))&&t.close()}))}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}}])&&l(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function b(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:String(e)}function m(t,e,r){return e=d(e),function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h()?Reflect.construct(e,r||[],d(t).constructor):e.apply(t,r))}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},v.apply(this,arguments)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}var S=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=m(this,e,[t]))._closeButton=r._popup.querySelector(".button_close"),r._closeButton.addEventListener("click",(function(){return r.close()})),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(e,t),r=e,(n=[{key:"open",value:function(t,r){v(d(e.prototype),"open",this).call(this);var n=document.querySelector(".popup__element"),o=n.nextElementSibling;n.src=r,n.alt=t,o.textContent=t}},{key:"close",value:function(){v(d(e.prototype),"close",this).call(this),v(d(e.prototype),"setEventListeners",this).call(this),document.removeEventListener("keydown",this._handleEscClose)}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(f);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function E(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:String(e)}function j(t,e,r){return e=P(e),function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}(t,O()?Reflect.construct(e,r||[],P(t).constructor):e.apply(t,r))}function O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(O=function(){return!!t})()}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},C.apply(this,arguments)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}var q=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=j(this,e,[t]))._formSubmitHandler=r,n._form=n._popup.querySelector(".popup__form"),n._handleFormSubmit=n._handleFormSubmit.bind(k(n)),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(e,t),r=e,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._form.querySelectorAll("input"),this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"_handleFormSubmit",value:function(t){t.preventDefault(),this._formSubmitHandler(this._getInputValues())}},{key:"setEventListeners",value:function(){C(P(e.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._handleFormSubmit)}},{key:"open",value:function(){C(P(e.prototype),"open",this).call(this)}},{key:"close",value:function(){C(P(e.prototype),"close",this).call(this),this._form.reset()}}])&&g(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(f);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B(n.key),n)}}function B(t){var e=function(t,e){if("object"!=T(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:String(e)}function I(t,e,r){return e=U(e),function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,R()?Reflect.construct(e,r||[],U(t).constructor):e.apply(t,r))}function R(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(R=function(){return!!t})()}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},A.apply(this,arguments)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}var V=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=I(this,e,[t]))._confirmButton=r._popup.querySelector(".popup__confirm-button"),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(e,t),r=e,(n=[{key:"setConfirmAction",value:function(t){var e=this;this._confirmHandler=t,this._confirmButton.removeEventListener("click",this._handleConfirm),this._handleConfirm=function(t){t.preventDefault(),e._confirmHandler(),e.close()},this._confirmButton.addEventListener("click",this._handleConfirm)}},{key:"setEventListeners",value:function(){A(U(e.prototype),"setEventListeners",this).call(this)}}])&&x(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(f);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function z(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:String(e)}var F=function(){function t(e){var r=e.nameSelector,n=e.jobSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(r),this._jobElement=document.querySelector(n)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,r=t.job;this._nameElement.textContent=e,this._jobElement.textContent=r}}])&&N(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),G=document.querySelector(".popup__form"),J=document.querySelector("#popup__avatar"),M=document.querySelector(".popup__form-add"),Q=document.querySelector(".profile__button-add"),X=document.querySelector(".popup__input-name"),K=document.querySelector(".popup__input-profesion"),W=document.querySelector(".profile__button-edit"),Y=new S(".popup_image"),Z=document.querySelector(".profile__avatar"),$=document.querySelector(".profile__name"),tt=document.querySelector(".profile__profession"),et=document.querySelector("#submit__add"),rt=document.querySelector("#popup__profile"),nt=document.querySelector("#submit__avatar"),ot=document.querySelector(".profile__buttonAvatar"),it=new q("#popup__add",Ot),ut=new q("#popup__edit",jt),ct=new q("#popup__avatar",Et),at=new F({nameSelector:".profile__name",jobSelector:".profile__profession"}),lt=new V("#popup__confirmacion");function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pt(n.key),n)}}function pt(t){var e=function(t,e){if("object"!=st(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==st(e)?e:String(e)}var yt=function(){function t(e,r,n,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.link=r,this.selector=i,this._handleCardClick=u,this.id=n,this.likes=o}var e,r;return e=t,(r=[{key:"_eventListener",value:function(t){var e=this;return this.clone.querySelector(".button__type-like").addEventListener("click",(function(){return e._likeCard()})),this.clone.querySelector(".button__delete").addEventListener("click",(function(t){return e._deleteCard(t)})),this.clone.querySelector(".images__card").addEventListener("click",(function(){e._handleCardClick(e.name,e.link)})),t}},{key:"_deleteCard",value:function(t){var e=this;lt.setConfirmAction((function(){var r=t.target.closest(".card"),n=document.querySelector(".popup__confirm-button");n.textContent="Eliminando...",c.deleteCard(e.id).then((function(){r.remove(),n.textContent="Si"})).catch((function(t){return console.error("Error al eliminar la tarjeta:",t)}))})),lt.open()}},{key:"_likeCard",value:function(){var t=this,e=this.likeButton.classList.contains("button__like-active");c.likeCard(this.id,e).then((function(r){t.likeButton.classList.toggle("button__like-active",!e),t.likeButton.classList.toggle("button__like",!e)})).catch((function(t){return console.error("Error al actualizar el me gusta:",t)}))}},{key:"createCardElement",value:function(){return this.card=document.querySelector(this.selector),this.clone=this.card.content.cloneNode(!0),this.likeButton=this.clone.querySelector(".button__type-like"),this.likeCountElement=this.clone.querySelector(".card__likes"),this._setAttributes(),this._setTextContent(),this._eventListener(),this.clone}},{key:"_setAttributes",value:function(){var t=this.clone.querySelector("img");t.setAttribute("src",this.link),t.setAttribute("alt",this.name)}},{key:"_setTextContent",value:function(){this.clone.querySelector(".card__text").textContent=this.name}}])&&ft(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ht(n.key),n)}}function ht(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bt(e)?e:String(e)}var vt=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.formElements=document.querySelectorAll(e.formSelector),this.inputSelector=e.inputSelector,this.submitButtonSelector=e.submitButtonSelector,this.inactiveButtonClass=e.inactiveButtonClass,this.inputErrorClass=e.inputErrorClass,this.errorClass=e.errorClass,this.enableValidation(r)}var e,r;return e=t,(r=[{key:"enableValidation",value:function(t){var e=this,r=Array.from(t.querySelectorAll(this.inputSelector)),n=t.querySelector(this.submitButtonSelector);this.toggleSubmitButton(n,t),r.forEach((function(r){r.addEventListener("input",(function(){e.handleInput(r,t,n)}))}))}},{key:"handleInput",value:function(t,e,r){t.validity.valid?this.hideInputError(t,e):this.showInputError(t,e),this.toggleSubmitButton(r,e)}},{key:"showInputError",value:function(t,e){t.classList.add(this.inputErrorClass);var r=e.querySelector("#".concat(t.id,"-error"));r.textContent=t.validationMessage,r.classList.add(this.errorClass)}},{key:"hideInputError",value:function(t,e){t.classList.remove(this.inputErrorClass);var r=e.querySelector("#".concat(t.id,"-error"));r.textContent="",r.classList.remove(this.errorClass)}},{key:"toggleSubmitButton",value:function(t,e){Array.from(e.querySelectorAll(this.inputSelector)).some((function(t){return!t.validity.valid||""===t.value.trim()}))?t.classList.add(this.inactiveButtonClass):t.classList.remove(this.inactiveButtonClass)}}])&&mt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,St(n.key),n)}}function St(t){var e=function(t,e){if("object"!=dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dt(e)?e:String(e)}var wt,gt=function(){function t(e,r){var n=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=n,this._renderer=o,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){return t._renderer(e)}))}},{key:"setItem",value:function(t){this._container.prepend(t)}}])&&_t(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Et(t){var e=t["input-url"];nt.textContent="Guardando...",c.updateAvatar(e).then((function(t){Z.src=t.avatar,ct.close(),nt.textContent="Save"})).catch((function(t){console.error("Error al actualizar el avatar:",t)}))}function jt(t){var e=t["input-name"],r=t["input-job"];rt.textContent="Guardando...",c.updateUserInfo(e,r).then((function(t){at.setUserInfo({name:t.name,job:t.about}),rt.textContent="Guardar"})).catch((function(t){console.error("Error al actualizar el perfil:",t)})),ut.close()}function Ot(t){var e=t["input-nameadd"],r=t["input-url"];et.textContent="Guardando...",c.getNewCards(e,r).then((function(t){var e=t.name,r=t.link,n=t._id,o=t.likes,i=new yt(e,r,n,o,"#template__card",Y.open).createCardElement();wt.setItem(i),ut.close(),et.textContent="Create",it.close()})).catch((function(t){console.error("Error al crear la carta:",t)}))}c.getUserInfo().then((function(t){$.textContent=t.name,tt.textContent=t.about,Z.src=t.avatar})),Q.addEventListener("click",(function(t){t.preventDefault(),it.open()})),W.addEventListener("click",(function(){c.getUserInfo().then((function(t){X.value=t.name,K.value=t.about,new vt(e,G),ut.open()}))})),ot.addEventListener("click",(function(){new vt(e,J),ct.open()})),c.getInitialCards().then((function(t){(wt=new gt({data:t,renderer:function(t){var e=t.name,r=t.link,n=t._id,o=t.likes,i=new yt(e,r,n,o,"#template__card",Y.open).createCardElement();wt.setItem(i)}},".cards")).renderItems(),ut.setEventListeners(),it.setEventListeners()})),new vt(e,M)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTNCcEosS0FBTU8sRUFBcUI2SSxFQUFyQjdJLEtBQU1zSixFQUFlVCxFQUFmUyxJQUFLOUQsRUFBVXFELEVBQVZyRCxNQVNuQlMsRUFSTyxJQUFJVixHQUNmOUYsRUFDQU8sRUFDQXNKLEVBQ0E5RCxFQUNBLGtCQUNBZixFQUFXNUQsTUFFWTJJLG9CQUN6QmxCLEdBQWdCbUIsUUFBUXhELEVBQzFCLEdBRUYsV0FHYzRELGNBQ2hCM0UsR0FBa0JqRSxvQkFDbEIrRCxHQUFpQi9ELG1CQUNuQixJQUNBLElBQUlrRyxHQUFjbkosRUFBa0JvRyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L2NvbnN0LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBmdW5jdGlvbiBjbG9zZUJ1dHRvbkNhcmRzKGV2ZW50KSB7XG4gIGNvbnN0IGNhcmQgPSBldmVudC50YXJnZXQuY2xvc2VzdChcIi5jYXJkXCIpO1xuICBpZiAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmRJZCA9IGNhcmQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jYXJkLWlkXCIpO1xuICAgIGNvbnNvbGUubG9nKGNhcmRJZCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1dHRvbkxpa2UoZXZldCkge1xuICBldmV0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiYnV0dG9uX19saWtlXCIpO1xufVxuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG59O1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoYmFzZVVybCwgaGVhZGVycykge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYFNlcnZlciBlcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYFNlcnZlciBlcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKSk7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIC4uLnRoaXMuaGVhZGVycyxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBTZXJ2ZXIgZXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcikpO1xuICB9XG5cbiAgZ2V0TmV3Q2FyZHMobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4udGhpcy5oZWFkZXJzLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgU2VydmVyIGVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpKTtcbiAgfVxuICBkZWxldGVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgU2VydmVyIGVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpKTtcbiAgfVxuICBsaWtlQ2FyZChpZCwgaXNMaWtlZCkge1xuICAgIGNvbnN0IG1ldGhvZCA9IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIjtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYFNlcnZlciBlcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKSk7XG4gIH1cbiAgdXBkYXRlQXZhdGFyKGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4udGhpcy5oZWFkZXJzLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogbGluayB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBTZXJ2ZXIgZXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcikpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVzLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvXCIsIHtcbiAgYXV0aG9yaXphdGlvbjogXCI1Y2I4MjRjNy0xOGVlLTRhN2YtYTBkNC1hZmE3ODViY2JjZWVcIixcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuZml4ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvZHlcIik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuZml4ZWQuY2xhc3NMaXN0LmFkZChcImZpeFwiKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuZml4ZWQuY2xhc3NMaXN0LnJlbW92ZShcImZpeFwiKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5cIikgfHxcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19idXR0b24tdHlwZWNsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl9jbG9zZVwiKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHN1cGVyLm9wZW4oKTtcblxuICAgIGNvbnN0IHBvcHVwSW1hZ2VTcmMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19lbGVtZW50XCIpO1xuICAgIGNvbnN0IHBvcHVwX190aXRsZSA9IHBvcHVwSW1hZ2VTcmMubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIHBvcHVwSW1hZ2VTcmMuc3JjID0gbGluaztcbiAgICBwb3B1cEltYWdlU3JjLmFsdCA9IG5hbWU7XG4gICAgcG9wdXBfX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZm9ybVN1Ym1pdEhhbmRsZXIpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtU3VibWl0SGFuZGxlciA9IGZvcm1TdWJtaXRIYW5kbGVyO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSB0aGlzLl9oYW5kbGVGb3JtU3VibWl0LmJpbmQodGhpcyk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIik7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgX2hhbmRsZUZvcm1TdWJtaXQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuX2Zvcm1TdWJtaXRIYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb25maXJtLWJ1dHRvblwiKTtcbiAgfVxuXG4gIHNldENvbmZpcm1BY3Rpb24oY29uZmlybUhhbmRsZXIpIHtcbiAgICB0aGlzLl9jb25maXJtSGFuZGxlciA9IGNvbmZpcm1IYW5kbGVyO1xuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNvbmZpcm0pO1xuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm0gPSAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9jb25maXJtSGFuZGxlcigpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gICAgdGhpcy5fY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ29uZmlybSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCB7XG4gIGZvcm1TdWJtaXRIYW5kbGVyLFxuICBmb3JtU3VibWl0SGFuZGxlckFkZCxcbiAgZm9ybVN1Ym1pdEhhbmRsZXJBdmF0YXIsXG59IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vVXNlckluZm8uanNcIjtcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRlbnQgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUGFycXVlIE5hY2lvbmFsIGRlIGxhIFZhbm9pc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGFQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9fYXZhdGFyXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGFQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tYWRkXCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcbmV4cG9ydCBjb25zdCBuYW1lUHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LW5hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmVzaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXQtcHJvZmVzaW9uXCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfaW1hZ2VcIik7XG5leHBvcnQgY29uc3QgYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wcm9mZXNzaW9uXCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvblN1Ym1pdENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N1Ym1pdF9fYWRkXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwU3VibWl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBfX3Byb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgcG9wdXBTdWJtaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N1Ym1pdF9fYXZhdGFyXCIpO1xuZXhwb3J0IGNvbnN0IGhlYWRlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uQXZhdGFyXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEZvcm1BZGQgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcG9wdXBfX2FkZFwiLFxuICBmb3JtU3VibWl0SGFuZGxlckFkZFxuKTtcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhGb3JtRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwb3B1cF9fZWRpdFwiLFxuICBmb3JtU3VibWl0SGFuZGxlclxuKTtcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhGb3JtQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3BvcHVwX19hdmF0YXJcIixcbiAgZm9ybVN1Ym1pdEhhbmRsZXJBdmF0YXJcbik7XG5leHBvcnQgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3Byb2Zlc3Npb25cIixcbn0pO1xuXG5leHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvciA9IFwiI3BvcHVwX19jb25maXJtYWNpb25cIjtcbmV4cG9ydCBjb25zdCBtaVBvcHVwQ29uQ29uZmlybWFjaW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihwb3B1cFNlbGVjdG9yKTtcbiIsImltcG9ydCB7IGNsb3NlQnV0dG9uQ2FyZHMsIGJ1dHRvbkxpa2UgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuaW1wb3J0IHsgbWlQb3B1cENvbkNvbmZpcm1hY2lvbiB9IGZyb20gXCIuL2NvbnN0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IobmFtZSwgbGluaywgaWQsIGxpa2VzLCBzZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMubGlrZXMgPSBsaWtlcztcbiAgfVxuXG4gIF9ldmVudExpc3RlbmVyKGNsb25lKSB7XG4gICAgdGhpcy5jbG9uZVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX190eXBlLWxpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fbGlrZUNhcmQoKSk7XG5cbiAgICB0aGlzLmNsb25lXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5idXR0b25fX2RlbGV0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZWxlbWVudCkgPT4gdGhpcy5fZGVsZXRlQ2FyZChlbGVtZW50KSk7XG5cbiAgICB0aGlzLmNsb25lLnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2VzX19jYXJkXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5uYW1lLCB0aGlzLmxpbmspO1xuICAgIH0pO1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxuICBfZGVsZXRlQ2FyZChlbGVtZW50KSB7XG4gICAgY29uc3QgY29uZmlybURlbGV0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZWxlbWVudC50YXJnZXQuY2xvc2VzdChcIi5jYXJkXCIpO1xuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY29uZmlybS1idXR0b25cIik7XG4gICAgICBkZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkVsaW1pbmFuZG8uLi5cIjtcbiAgICAgIGFwaVxuICAgICAgICAuZGVsZXRlQ2FyZCh0aGlzLmlkKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJTaVwiO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PlxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBlbGltaW5hciBsYSB0YXJqZXRhOlwiLCBlcnJvcilcbiAgICAgICAgKTtcbiAgICB9O1xuICAgIG1pUG9wdXBDb25Db25maXJtYWNpb24uc2V0Q29uZmlybUFjdGlvbihjb25maXJtRGVsZXRlKTtcbiAgICBtaVBvcHVwQ29uQ29uZmlybWFjaW9uLm9wZW4oKTtcbiAgfVxuXG4gIF9saWtlQ2FyZCgpIHtcbiAgICBjb25zdCBpc0xpa2VkID0gdGhpcy5saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImJ1dHRvbl9fbGlrZS1hY3RpdmVcIik7XG4gICAgYXBpXG4gICAgICAubGlrZUNhcmQodGhpcy5pZCwgaXNMaWtlZClcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiYnV0dG9uX19saWtlLWFjdGl2ZVwiLCAhaXNMaWtlZCk7XG4gICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiYnV0dG9uX19saWtlXCIsICFpc0xpa2VkKTtcbiAgICAgICAgLy8gdGhpcy5saWtlQ291bnRFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT5cbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgbWUgZ3VzdGE6XCIsIGVycm9yKVxuICAgICAgKTtcbiAgfVxuXG4gIGNyZWF0ZUNhcmRFbGVtZW50KCkge1xuICAgIHRoaXMuY2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZWxlY3Rvcik7XG4gICAgdGhpcy5jbG9uZSA9IHRoaXMuY2FyZC5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLmxpa2VCdXR0b24gPSB0aGlzLmNsb25lLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX190eXBlLWxpa2VcIik7XG4gICAgdGhpcy5saWtlQ291bnRFbGVtZW50ID0gdGhpcy5jbG9uZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzXCIpO1xuICAgIHRoaXMuX3NldEF0dHJpYnV0ZXMoKTtcbiAgICB0aGlzLl9zZXRUZXh0Q29udGVudCgpO1xuICAgIHRoaXMuX2V2ZW50TGlzdGVuZXIoKTtcbiAgICByZXR1cm4gdGhpcy5jbG9uZTtcbiAgfVxuICBfc2V0QXR0cmlidXRlcygpIHtcbiAgICBjb25zdCBpbWcgPSB0aGlzLmNsb25lLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XG4gICAgaW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLmxpbmspO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5uYW1lKTtcbiAgfVxuICBfc2V0VGV4dENvbnRlbnQoKSB7XG4gICAgdGhpcy5jbG9uZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuZm9ybUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuaW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLmVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5lbmFibGVWYWxpZGF0aW9uKGZvcm1FbGVtZW50KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oZm9ybUVsZW1lbnQpIHtcbiAgICBjb25zdCBpbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMudG9nZ2xlU3VibWl0QnV0dG9uKHN1Ym1pdEJ1dHRvbkVsZW1lbnQsIGZvcm1FbGVtZW50KTtcblxuICAgIGlucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVJbnB1dChpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50LCBzdWJtaXRCdXR0b25FbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlSW5wdXQoaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudCwgc3VibWl0QnV0dG9uRWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLnNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZm9ybUVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZm9ybUVsZW1lbnQpO1xuICAgIH1cblxuICAgIHRoaXMudG9nZ2xlU3VibWl0QnV0dG9uKHN1Ym1pdEJ1dHRvbkVsZW1lbnQsIGZvcm1FbGVtZW50KTtcbiAgfVxuXG4gIHNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZm9ybUVsZW1lbnQpIHtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgdG9nZ2xlU3VibWl0QnV0dG9uKHN1Ym1pdEJ1dHRvbkVsZW1lbnQsIGZvcm1FbGVtZW50KSB7XG4gICAgY29uc3QgaW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIGNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IGlucHV0RWxlbWVudHMuc29tZShcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+XG4gICAgICAgICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQgfHwgaW5wdXRFbGVtZW50LnZhbHVlLnRyaW0oKSA9PT0gXCJcIlxuICAgICk7XG5cbiAgICBpZiAoaGFzSW52YWxpZElucHV0KSB7XG4gICAgICBzdWJtaXRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VibWl0QnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRpb25Db25maWcgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgZm9ybVZhbGlkYVByb2ZpbGUsXG4gIGZvcm1WYWxpZGFQbGFjZSxcbiAgYnV0dG9uQWRkLFxuICBuYW1lUHJvZmVzc2lvbixcbiAgcHJvZmVzaW9uLFxuICBidXR0b25FZGl0LFxuICBpbWFnZVBvcHVwLFxuICBwb3B1cFdpdGhGb3JtQWRkLFxuICBwb3B1cFdpdGhGb3JtRWRpdCxcbiAgdXNlckluZm8sXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlQWJvdXQsXG4gIGJ1dHRvblN1Ym1pdENhcmQsXG4gIHBvcHVwU3VibWl0UHJvZmlsZSxcbiAgcG9wdXBXaXRoRm9ybUF2YXRhcixcbiAgaGVhZGVyQXZhdGFyLFxuICBhdmF0YXIsXG4gIHBvcHVwU3VibWl0QXZhdGFyLFxuICBmb3JtVmFsaWRhQXZhdGFyLFxufSBmcm9tIFwiLi9jb25zdC5qc1wiO1xubGV0IGRlZmF1bHRDYXJkTGlzdDtcblxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuXG5mdW5jdGlvbiBwb3B1cEJ1dHRvbkFkZChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwb3B1cFdpdGhGb3JtQWRkLm9wZW4oKTtcbn1cblxuYXBpLmdldFVzZXJJbmZvKCkudGhlbigodXNlckRhdGEpID0+IHtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcbiAgYXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcbn0pO1xuXG5mdW5jdGlvbiBvcGVuUHJvZmlsZSgpIHtcbiAgYXBpLmdldFVzZXJJbmZvKCkudGhlbigodXNlckRhdGEpID0+IHtcbiAgICBuYW1lUHJvZmVzc2lvbi52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XG4gICAgcHJvZmVzaW9uLnZhbHVlID0gdXNlckRhdGEuYWJvdXQ7XG4gICAgbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVZhbGlkYVByb2ZpbGUpO1xuICAgIHBvcHVwV2l0aEZvcm1FZGl0Lm9wZW4oKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBvcGVuUHJvZmlsZUF2YXRhcigpIHtcbiAgbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVZhbGlkYUF2YXRhcik7XG4gIHBvcHVwV2l0aEZvcm1BdmF0YXIub3BlbigpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybVN1Ym1pdEhhbmRsZXJBdmF0YXIoZm9ybVZhbHVlcykge1xuICBjb25zdCBsaW5rID0gZm9ybVZhbHVlc1tcImlucHV0LXVybFwiXTtcbiAgcG9wdXBTdWJtaXRBdmF0YXIudGV4dENvbnRlbnQgPSBcIkd1YXJkYW5kby4uLlwiO1xuICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKGxpbmspXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICBhdmF0YXIuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xuICAgICAgcG9wdXBXaXRoRm9ybUF2YXRhci5jbG9zZSgpO1xuICAgICAgcG9wdXBTdWJtaXRBdmF0YXIudGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGF2YXRhcjpcIiwgZXJyb3IpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybVN1Ym1pdEhhbmRsZXIoZm9ybVZhbHVlcykge1xuICBjb25zdCBuYW1lID0gZm9ybVZhbHVlc1tcImlucHV0LW5hbWVcIl07XG4gIGNvbnN0IGFib3V0ID0gZm9ybVZhbHVlc1tcImlucHV0LWpvYlwiXTtcbiAgcG9wdXBTdWJtaXRQcm9maWxlLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcbiAgYXBpXG4gICAgLnVwZGF0ZVVzZXJJbmZvKG5hbWUsIGFib3V0KVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgICBqb2I6IHVzZXJEYXRhLmFib3V0LFxuICAgICAgfSk7XG4gICAgICBwb3B1cFN1Ym1pdFByb2ZpbGUudGV4dENvbnRlbnQgPSBcIkd1YXJkYXJcIjtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIHBlcmZpbDpcIiwgZXJyb3IpO1xuICAgIH0pO1xuXG4gIHBvcHVwV2l0aEZvcm1FZGl0LmNsb3NlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtU3VibWl0SGFuZGxlckFkZChmb3JtVmFsdWVzKSB7XG4gIGNvbnN0IG5hbWUgPSBmb3JtVmFsdWVzW1wiaW5wdXQtbmFtZWFkZFwiXTtcbiAgY29uc3QgbGluayA9IGZvcm1WYWx1ZXNbXCJpbnB1dC11cmxcIl07XG5cbiAgYnV0dG9uU3VibWl0Q2FyZC50ZXh0Q29udGVudCA9IFwiR3VhcmRhbmRvLi4uXCI7XG5cbiAgYXBpXG4gICAgLmdldE5ld0NhcmRzKG5hbWUsIGxpbmspXG4gICAgLnRoZW4oKG5ld0NhcmREYXRhKSA9PiB7XG4gICAgICBjb25zdCB7IG5hbWUsIGxpbmssIF9pZCwgbGlrZXMgfSA9IG5ld0NhcmREYXRhO1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rLFxuICAgICAgICBfaWQsXG4gICAgICAgIGxpa2VzLFxuICAgICAgICBcIiN0ZW1wbGF0ZV9fY2FyZFwiLFxuICAgICAgICBpbWFnZVBvcHVwLm9wZW5cbiAgICAgICkuY3JlYXRlQ2FyZEVsZW1lbnQoKTtcblxuICAgICAgZGVmYXVsdENhcmRMaXN0LnNldEl0ZW0obmV3Q2FyZCk7XG5cbiAgICAgIHBvcHVwV2l0aEZvcm1FZGl0LmNsb3NlKCk7XG4gICAgICBidXR0b25TdWJtaXRDYXJkLnRleHRDb250ZW50ID0gXCJDcmVhdGVcIjtcbiAgICAgIHBvcHVwV2l0aEZvcm1BZGQuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjcmVhciBsYSBjYXJ0YTpcIiwgZXJyb3IpO1xuICAgIH0pO1xufVxuXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHBvcHVwQnV0dG9uQWRkKTtcbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlKTtcbmhlYWRlckF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblByb2ZpbGVBdmF0YXIpO1xuXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoY2FyZHMpID0+IHtcbiAgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgZGF0YTogY2FyZHMsXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgeyBuYW1lLCBsaW5rLCBfaWQsIGxpa2VzIH0gPSBpdGVtO1xuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBsaW5rLFxuICAgICAgICAgIF9pZCxcbiAgICAgICAgICBsaWtlcyxcbiAgICAgICAgICBcIiN0ZW1wbGF0ZV9fY2FyZFwiLFxuICAgICAgICAgIGltYWdlUG9wdXAub3BlblxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuY3JlYXRlQ2FyZEVsZW1lbnQoKTtcbiAgICAgICAgZGVmYXVsdENhcmRMaXN0LnNldEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgfSxcbiAgICB9LFxuICAgIFwiLmNhcmRzXCJcbiAgKTtcblxuICBkZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcbiAgcG9wdXBXaXRoRm9ybUVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgcG9wdXBXaXRoRm9ybUFkZC5zZXRFdmVudExpc3RlbmVycygpO1xufSk7XG5uZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtVmFsaWRhUGxhY2UpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gZGF0YTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gIH1cblxuICBzZXRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiYXBpIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwidmFsdWUiLCJmZXRjaCIsImNvbmNhdCIsInRoZW4iLCJyZXMiLCJvayIsIkVycm9yIiwic3RhdHVzIiwianNvbiIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiX29iamVjdFNwcmVhZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibGluayIsImlkIiwiaXNMaWtlZCIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmaXhlZCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl90aGlzIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImNsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfY2FsbFN1cGVyIiwiX2Nsb3NlQnV0dG9uIiwiX2luaGVyaXRzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInBvcHVwSW1hZ2VTcmMiLCJwb3B1cF9fdGl0bGUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0SGFuZGxlciIsIl9mb3JtU3VibWl0SGFuZGxlciIsIl9mb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX3RoaXMyIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfY29uZmlybUJ1dHRvbiIsImNvbmZpcm1IYW5kbGVyIiwiX2NvbmZpcm1IYW5kbGVyIiwiX2hhbmRsZUNvbmZpcm0iLCJVc2VySW5mbyIsIl9yZWYiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50Iiwiam9iIiwiX3JlZjIiLCJmb3JtVmFsaWRhUHJvZmlsZSIsImZvcm1WYWxpZGFBdmF0YXIiLCJmb3JtVmFsaWRhUGxhY2UiLCJidXR0b25BZGQiLCJuYW1lUHJvZmVzc2lvbiIsInByb2Zlc2lvbiIsImJ1dHRvbkVkaXQiLCJpbWFnZVBvcHVwIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlQWJvdXQiLCJidXR0b25TdWJtaXRDYXJkIiwicG9wdXBTdWJtaXRQcm9maWxlIiwicG9wdXBTdWJtaXRBdmF0YXIiLCJoZWFkZXJBdmF0YXIiLCJwb3B1cFdpdGhGb3JtQWRkIiwiZm9ybVN1Ym1pdEhhbmRsZXJBZGQiLCJwb3B1cFdpdGhGb3JtRWRpdCIsInBvcHVwV2l0aEZvcm1BdmF0YXIiLCJmb3JtU3VibWl0SGFuZGxlckF2YXRhciIsInVzZXJJbmZvIiwibWlQb3B1cENvbkNvbmZpcm1hY2lvbiIsIkNhcmQiLCJsaWtlcyIsInNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUNhcmRDbGljayIsImNsb25lIiwiX2xpa2VDYXJkIiwiZWxlbWVudCIsIl9kZWxldGVDYXJkIiwic2V0Q29uZmlybUFjdGlvbiIsImNhcmRFbGVtZW50IiwiY2xvc2VzdCIsImRlbGV0ZUJ1dHRvbiIsImRlbGV0ZUNhcmQiLCJfdGhpczMiLCJsaWtlQnV0dG9uIiwibGlrZUNhcmQiLCJkYXRhIiwidG9nZ2xlIiwiY2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJsaWtlQ291bnRFbGVtZW50IiwiX3NldEF0dHJpYnV0ZXMiLCJfc2V0VGV4dENvbnRlbnQiLCJfZXZlbnRMaXN0ZW5lciIsImltZyIsInNldEF0dHJpYnV0ZSIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsImZvcm1FbGVtZW50cyIsImVuYWJsZVZhbGlkYXRpb24iLCJpbnB1dEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwic3VibWl0QnV0dG9uRWxlbWVudCIsInRvZ2dsZVN1Ym1pdEJ1dHRvbiIsImlucHV0RWxlbWVudCIsImhhbmRsZUlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhpZGVJbnB1dEVycm9yIiwic2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJ0cmltIiwiZGVmYXVsdENhcmRMaXN0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsImZvcm1WYWx1ZXMiLCJ1cGRhdGVBdmF0YXIiLCJ1c2VyRGF0YSIsInVwZGF0ZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJnZXROZXdDYXJkcyIsIm5ld0NhcmREYXRhIiwiX2lkIiwibmV3Q2FyZCIsImNyZWF0ZUNhcmRFbGVtZW50Iiwic2V0SXRlbSIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=
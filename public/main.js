!function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};function e(t){var e=t.target.parentElement.parentElement;e&&(e.classList.add("popup-closeTransition"),e.addEventListener("animationend",(function(){e.classList.remove("popup-closeTransition"),e.remove()})))}function n(t){t.target.classList.toggle("button__like")}t.d({},{c:function(){return $},G:function(){return tt}});var r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:String(e)}var c=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.link=n,this.selector=r,this._handleCardClick=o}var r,o;return r=t,(o=[{key:"_eventListener",value:function(t){var r=this;return this.clone.querySelector(".button__type-like").addEventListener("click",n),this.clone.querySelector(".button__delete").addEventListener("click",e),this.clone.querySelector(".images__card").addEventListener("click",(function(){r._handleCardClick(r.name,r.link)})),t}},{key:"createCardElement",value:function(){return this.card=document.querySelector(this.selector),this.clone=this.card.content.cloneNode(!0),this._setAttributes(),this._setTextContent(),this._eventListener(),this.clone}},{key:"_setAttributes",value:function(){var t=this.clone.querySelector("img");t.setAttribute("src",this.link),t.setAttribute("alt",this.name)}},{key:"_setTextContent",value:function(){this.clone.querySelector(".card__text").textContent=this.name}}])&&i(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:String(e)}var p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.formElements=document.querySelectorAll(e.formSelector),this.inputSelector=e.inputSelector,this.submitButtonSelector=e.submitButtonSelector,this.inactiveButtonClass=e.inactiveButtonClass,this.inputErrorClass=e.inputErrorClass,this.errorClass=e.errorClass,this.enableValidation(n)}var e,n;return e=t,(n=[{key:"enableValidation",value:function(t){var e=this,n=Array.from(t.querySelectorAll(this.inputSelector)),r=t.querySelector(this.submitButtonSelector);this.toggleSubmitButton(r,t),n.forEach((function(n){n.addEventListener("input",(function(){e.handleInput(n,t,r)}))}))}},{key:"handleInput",value:function(t,e,n){t.validity.valid?this.hideInputError(t,e):this.showInputError(t,e),this.toggleSubmitButton(n,e)}},{key:"showInputError",value:function(t,e){t.classList.add(this.inputErrorClass);var n=e.querySelector("#".concat(t.id,"-error"));n.textContent=t.validationMessage,n.classList.add(this.errorClass)}},{key:"hideInputError",value:function(t,e){t.classList.remove(this.inputErrorClass);var n=e.querySelector("#".concat(t.id,"-error"));n.textContent="",n.classList.remove(this.errorClass)}},{key:"toggleSubmitButton",value:function(t,e){Array.from(e.querySelectorAll(this.inputSelector)).some((function(t){return!t.validity.valid||""===t.value.trim()}))?t.classList.add(this.inactiveButtonClass):t.classList.remove(this.inactiveButtonClass)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:String(e)}var b=function(){function t(e,n){var r=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){return t._renderer(e)}))}},{key:"setItem",value:function(t){this._container.prepend(t)}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:String(e)}var _=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this.fixed=document.querySelector(".body"),this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_open"),document.addEventListener("keyup",this._handleEscClose),this.fixed.classList.add("fix"),this.setEventListeners()}},{key:"close",value:function(){this._popup.classList.remove("popup_open"),document.removeEventListener("keyup",this._handleEscClose),this.fixed.classList.remove("fix")}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){(e.target.classList.contains("popup_open")||e.target.classList.contains("popup__button-typeclose"))&&t.close()}))}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function g(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:String(e)}function E(t,e,n){return e=O(e),function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,j()?Reflect.construct(e,n||[],O(t).constructor):e.apply(t,n))}function j(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(j=function(){return!!t})()}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},k.apply(this,arguments)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}var C=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=E(this,e,[t]))._closeButton=n._popup.querySelector(".button_close"),n._closeButton.addEventListener("click",(function(){return n.close()})),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(e,t),n=e,(r=[{key:"open",value:function(t,n){k(O(e.prototype),"open",this).call(this);var r=document.querySelector(".popup__element"),o=r.nextElementSibling;r.src=n,r.alt=t,o.textContent=t}},{key:"close",value:function(){k(O(e.prototype),"close",this).call(this),k(O(e.prototype),"setEventListeners",this).call(this),document.removeEventListener("keydown",this._handleEscClose)}}])&&w(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(_);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function B(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:String(e)}function T(t,e,n){return e=A(e),function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return I(t)}(t,x()?Reflect.construct(e,n||[],A(t).constructor):e.apply(t,n))}function x(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(x=function(){return!!t})()}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},R.apply(this,arguments)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}var z=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=T(this,e,[t]))._formSubmitHandler=n,r._form=r._popup.querySelector(".popup__form"),r._handleFormSubmit=r._handleFormSubmit.bind(I(r)),r}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(e,t),n=e,(r=[{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._form.querySelectorAll("input"),this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"_handleFormSubmit",value:function(t){t.preventDefault(),this._formSubmitHandler(this._getInputValues()),this.close()}},{key:"setEventListeners",value:function(){R(A(e.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._handleFormSubmit)}},{key:"open",value:function(){R(A(e.prototype),"open",this).call(this)}},{key:"close",value:function(){R(A(e.prototype),"close",this).call(this),this._form.reset()}}])&&q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(_);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F(r.key),r)}}function F(t){var e=function(t,e){if("object"!=D(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:String(e)}var U=function(){function t(e){var n=e.nameSelector,r=e.jobSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.job;this._nameElement.textContent=e,this._jobElement.textContent=n}}])&&W(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),H=document.querySelector(".popup__form"),M=document.querySelector(".popup__form-add"),N=document.querySelector(".profile__button-add"),G=document.querySelector(".popup__input-name"),Y=document.querySelector(".popup__input-profesion"),J=document.querySelector(".profile__button-edit"),K=new C(".popup_image"),Q=new z(".popup__add",tt),X=new z(".popup__edit",$),Z=new U({nameSelector:".profile__name",jobSelector:".profile__profession"});function $(t){Z.setUserInfo({name:t["input-name"],job:t["input-job"]}),console.log(t),X.close()}function tt(t){var e=new c(t["input-nameadd"],t["input-url"],"#template__card",K.open).createCardElement();et.setItem(e),X.close()}N.addEventListener("click",(function(t){t.preventDefault(),Q.open()})),J.addEventListener("click",(function(){var t=Z.getUserInfo();G.value=t.name,Y.value=t.job,new p(r,H),X.open()}));var et=new b({data:[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"MontaÃ±as Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:function(t){var e=new c(t.name,t.link,"#template__card",K.open).createCardElement();et.setItem(e)}},".cards");new p(r,M),et.renderItems(),X.setEventListeners(),Q.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUYsSUFBSWxHLEVBQWM1QixFQUFrQjBHLEdBQ3BDZ0IsR0FBZ0JLLGNBQ2hCYixFQUFrQjdDLG9CQUNsQjJDLEVBQWlCM0MsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L2NvbnN0LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBmdW5jdGlvbiBjbG9zZUJ1dHRvbkNhcmRzKGV2ZW50KSB7XHJcbiAgY29uc3QgY2FyZCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgaWYgKGNhcmQpIHtcclxuICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcInBvcHVwLWNsb3NlVHJhbnNpdGlvblwiKTtcclxuICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLCAoKSA9PiB7XHJcbiAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLWNsb3NlVHJhbnNpdGlvblwiKTtcclxuICAgICAgY2FyZC5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1dHRvbkxpa2UoZXZldCkge1xyXG4gIGV2ZXQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJidXR0b25fX2xpa2VcIik7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiaW1wb3J0IHsgY2xvc2VCdXR0b25DYXJkcywgYnV0dG9uTGlrZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lLCBsaW5rLCBzZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5saW5rID0gbGluaztcclxuICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9ldmVudExpc3RlbmVyKGNsb25lKSB7XHJcbiAgICB0aGlzLmNsb25lXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl9fdHlwZS1saWtlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYnV0dG9uTGlrZSk7XHJcblxyXG4gICAgdGhpcy5jbG9uZVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5idXR0b25fX2RlbGV0ZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQnV0dG9uQ2FyZHMpO1xyXG5cclxuICAgIHRoaXMuY2xvbmUucXVlcnlTZWxlY3RvcihcIi5pbWFnZXNfX2NhcmRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMubmFtZSwgdGhpcy5saW5rKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBjbG9uZTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmRFbGVtZW50KCkge1xyXG4gICAgdGhpcy5jYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNlbGVjdG9yKTtcclxuICAgIHRoaXMuY2xvbmUgPSB0aGlzLmNhcmQuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9zZXRBdHRyaWJ1dGVzKCk7XHJcbiAgICB0aGlzLl9zZXRUZXh0Q29udGVudCgpO1xyXG4gICAgdGhpcy5fZXZlbnRMaXN0ZW5lcigpO1xyXG4gICAgcmV0dXJuIHRoaXMuY2xvbmU7XHJcbiAgfVxyXG4gIF9zZXRBdHRyaWJ1dGVzKCkge1xyXG4gICAgY29uc3QgaW1nID0gdGhpcy5jbG9uZS5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xyXG4gICAgaW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLmxpbmspO1xyXG4gICAgaW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLm5hbWUpO1xyXG4gIH1cclxuICBfc2V0VGV4dENvbnRlbnQoKSB7XHJcbiAgICB0aGlzLmNsb25lLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuZm9ybUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgdmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLmlucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5lcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5lbmFibGVWYWxpZGF0aW9uKGZvcm1FbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oZm9ybUVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGlucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBjb25zdCBzdWJtaXRCdXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIC8vIHN1Ym1pdEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy50b2dnbGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uRWxlbWVudCwgZm9ybUVsZW1lbnQpO1xyXG5cclxuICAgIGlucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlSW5wdXQoaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudCwgc3VibWl0QnV0dG9uRWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVJbnB1dChpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50LCBzdWJtaXRCdXR0b25FbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLnNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZm9ybUVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvbihzdWJtaXRCdXR0b25FbGVtZW50LCBmb3JtRWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50KSB7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudCkge1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uRWxlbWVudCwgZm9ybUVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGlucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBjb25zdCBoYXNJbnZhbGlkSW5wdXQgPSBpbnB1dEVsZW1lbnRzLnNvbWUoXHJcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+XHJcbiAgICAgICAgIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCB8fCBpbnB1dEVsZW1lbnQudmFsdWUudHJpbSgpID09PSBcIlwiXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChoYXNJbnZhbGlkSW5wdXQpIHtcclxuICAgICAgc3VibWl0QnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdWJtaXRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuZml4ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvZHlcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLmZpeGVkLmNsYXNzTGlzdC5hZGQoXCJmaXhcIik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuZml4ZWQuY2xhc3NMaXN0LnJlbW92ZShcImZpeFwiKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5cIikgfHxcclxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2J1dHRvbi10eXBlY2xvc2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX2Nsb3NlXCIpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuXHJcbiAgICBjb25zdCBwb3B1cEltYWdlU3JjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZWxlbWVudFwiKTtcclxuICAgIGNvbnN0IHBvcHVwX190aXRsZSA9IHBvcHVwSW1hZ2VTcmMubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgcG9wdXBJbWFnZVNyYy5zcmMgPSBsaW5rO1xyXG4gICAgcG9wdXBJbWFnZVNyYy5hbHQgPSBuYW1lO1xyXG4gICAgcG9wdXBfX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXRIYW5kbGVyKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1TdWJtaXRIYW5kbGVyID0gZm9ybVN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSB0aGlzLl9oYW5kbGVGb3JtU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUZvcm1TdWJtaXQoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl9mb3JtU3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBmb3JtU3VibWl0SGFuZGxlciwgZm9ybVN1Ym1pdEhhbmRsZXJBZGQgfSBmcm9tIFwiLi9pbmRleC5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vVXNlckluZm8uanNcIjtcclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGVudCA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYVBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1hZGRcIik7XHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1hZGRcIik7XHJcbmV4cG9ydCBjb25zdCBuYW1lUHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0LW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9mZXNpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dC1wcm9mZXNpb25cIik7XHJcbmV4cG9ydCBjb25zdCBidXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfaW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhGb3JtQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucG9wdXBfX2FkZFwiLFxyXG4gIGZvcm1TdWJtaXRIYW5kbGVyQWRkXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhGb3JtRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwX19lZGl0XCIsXHJcbiAgZm9ybVN1Ym1pdEhhbmRsZXJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3Byb2Zlc3Npb25cIixcclxufSk7XHJcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgdmFsaWRhdGlvbkNvbmZpZyB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBjYXJkc0NvbnRlbnQsXHJcbiAgZm9ybVZhbGlkYVByb2ZpbGUsXHJcbiAgZm9ybVZhbGlkYVBsYWNlLFxyXG4gIGJ1dHRvbkFkZCxcclxuICBuYW1lUHJvZmVzc2lvbixcclxuICBwcm9mZXNpb24sXHJcbiAgYnV0dG9uRWRpdCxcclxuICBpbWFnZVBvcHVwLFxyXG4gIHBvcHVwV2l0aEZvcm1BZGQsXHJcbiAgcG9wdXBXaXRoRm9ybUVkaXQsXHJcbiAgdXNlckluZm8sXHJcbn0gZnJvbSBcIi4vY29uc3QuanNcIjtcclxuXHJcbmZ1bmN0aW9uIHBvcHVwQnV0dG9uQWRkKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBwb3B1cFdpdGhGb3JtQWRkLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlblByb2ZpbGUoKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVQcm9mZXNzaW9uLnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBwcm9mZXNpb24udmFsdWUgPSB1c2VyRGF0YS5qb2I7XHJcbiAgbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVZhbGlkYVByb2ZpbGUpO1xyXG4gIHBvcHVwV2l0aEZvcm1FZGl0Lm9wZW4oKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1TdWJtaXRIYW5kbGVyKGZvcm1WYWx1ZXMpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICBuYW1lOiBmb3JtVmFsdWVzW1wiaW5wdXQtbmFtZVwiXSxcclxuICAgIGpvYjogZm9ybVZhbHVlc1tcImlucHV0LWpvYlwiXSxcclxuICB9KTtcclxuICBjb25zb2xlLmxvZyhmb3JtVmFsdWVzKTtcclxuICBwb3B1cFdpdGhGb3JtRWRpdC5jbG9zZSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybVN1Ym1pdEhhbmRsZXJBZGQoZm9ybVZhbHVlcykge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcclxuICAgIGZvcm1WYWx1ZXNbXCJpbnB1dC1uYW1lYWRkXCJdLFxyXG4gICAgZm9ybVZhbHVlc1tcImlucHV0LXVybFwiXSxcclxuICAgIFwiI3RlbXBsYXRlX19jYXJkXCIsXHJcbiAgICBpbWFnZVBvcHVwLm9wZW5cclxuICApLmNyZWF0ZUNhcmRFbGVtZW50KCk7XHJcbiAgZGVmYXVsdENhcmRMaXN0LnNldEl0ZW0obmV3Q2FyZCk7XHJcbiAgcG9wdXBXaXRoRm9ybUVkaXQuY2xvc2UoKTtcclxufVxyXG5cclxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwb3B1cEJ1dHRvbkFkZCk7XHJcbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlKTtcclxuXHJcbmNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGRhdGE6IGNhcmRzQ29udGVudCxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICAgICAgaXRlbS5uYW1lLFxyXG4gICAgICAgIGl0ZW0ubGluayxcclxuICAgICAgICBcIiN0ZW1wbGF0ZV9fY2FyZFwiLFxyXG4gICAgICAgIGltYWdlUG9wdXAub3BlblxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuY3JlYXRlQ2FyZEVsZW1lbnQoKTtcclxuICAgICAgZGVmYXVsdENhcmRMaXN0LnNldEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRzXCJcclxuKTtcclxubmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybVZhbGlkYVBsYWNlKTtcclxuZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbnBvcHVwV2l0aEZvcm1FZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEZvcm1BZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY2xvc2VCdXR0b25DYXJkcyIsImV2ZW50IiwiY2FyZCIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiYnV0dG9uTGlrZSIsImV2ZXQiLCJ0b2dnbGUiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwibmFtZSIsImxpbmsiLCJzZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfaGFuZGxlQ2FyZENsaWNrIiwidmFsdWUiLCJjbG9uZSIsIl90aGlzIiwicXVlcnlTZWxlY3RvciIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRBdHRyaWJ1dGVzIiwiX3NldFRleHRDb250ZW50IiwiX2V2ZW50TGlzdGVuZXIiLCJpbWciLCJzZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsImZvcm1FbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW5wdXRFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInN1Ym1pdEJ1dHRvbkVsZW1lbnQiLCJ0b2dnbGVTdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiaGFuZGxlSW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGlkZUlucHV0RXJyb3IiLCJzaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwidHJpbSIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJkYXRhIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJmaXhlZCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29udGFpbnMiLCJjbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2NhbGxTdXBlciIsIl9jbG9zZUJ1dHRvbiIsIl9pbmhlcml0cyIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwb3B1cEltYWdlU3JjIiwicG9wdXBfX3RpdGxlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwic3JjIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXRIYW5kbGVyIiwiX2Zvcm1TdWJtaXRIYW5kbGVyIiwiX2Zvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJfdGhpczIiLCJfaW5wdXRMaXN0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJqb2IiLCJfcmVmMiIsImZvcm1WYWxpZGFQcm9maWxlIiwiZm9ybVZhbGlkYVBsYWNlIiwiYnV0dG9uQWRkIiwibmFtZVByb2Zlc3Npb24iLCJwcm9mZXNpb24iLCJidXR0b25FZGl0IiwiaW1hZ2VQb3B1cCIsInBvcHVwV2l0aEZvcm1BZGQiLCJmb3JtU3VibWl0SGFuZGxlckFkZCIsInBvcHVwV2l0aEZvcm1FZGl0IiwidXNlckluZm8iLCJmb3JtVmFsdWVzIiwic2V0VXNlckluZm8iLCJjb25zb2xlIiwibG9nIiwibmV3Q2FyZCIsImNyZWF0ZUNhcmRFbGVtZW50IiwiZGVmYXVsdENhcmRMaXN0Iiwic2V0SXRlbSIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJjYXJkRWxlbWVudCIsInJlbmRlckl0ZW1zIl0sInNvdXJjZVJvb3QiOiIifQ==